<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar - vbGear</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        .calendar-layout {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 32px;
            max-width: 1100px;
            margin: 0 auto;
        }

        /* Calendar Container */
        .calendar-container {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 24px;
            overflow: hidden;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .calendar-title {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(to right, #fff, #a1a1a1);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .calendar-nav {
            display: flex;
            gap: 8px;
        }

        .calendar-nav-btn {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .calendar-nav-btn:hover {
            background: rgba(57, 255, 20, 0.1);
            border-color: var(--accent-primary);
            color: var(--accent-primary);
        }

        .calendar-nav-btn svg {
            width: 20px;
            height: 20px;
        }

        /* Calendar Grid */
        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            margin-bottom: 8px;
        }

        .weekday {
            text-align: center;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-secondary);
            padding: 12px 0;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .weekday.weekend {
            color: rgba(255, 100, 100, 0.6);
        }

        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.95rem;
            font-weight: 500;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text-primary);
            position: relative;
            border: 2px solid transparent;
        }

        .calendar-day:hover:not(.empty):not(.past) {
            background: rgba(57, 255, 20, 0.15);
            border-color: var(--accent-primary);
        }

        .calendar-day.empty {
            cursor: default;
        }

        .calendar-day.other-month {
            color: var(--text-secondary);
            opacity: 0.4;
        }

        .calendar-day.today {
            background: var(--accent-primary);
            color: var(--bg-dark);
            font-weight: 700;
            box-shadow: 0 0 20px var(--accent-glow);
        }

        .calendar-day.today:hover {
            background: #32cd32;
        }

        .calendar-day.selected {
            background: rgba(57, 255, 20, 0.2);
            border-color: var(--accent-primary);
            color: var(--accent-primary);
            font-weight: 700;
        }

        .calendar-day.selected.today {
            background: var(--accent-primary);
            color: var(--bg-dark);
        }

        .calendar-day.weekend {
            color: rgba(255, 150, 150, 0.8);
        }

        .calendar-day.weekend.today {
            color: var(--bg-dark);
        }

        .calendar-day.past {
            opacity: 0.5;
        }

        .calendar-day.past:hover {
            background: rgba(255, 150, 150, 0.15);
            border-color: rgba(255, 150, 150, 0.5);
        }

        /* Today indicator dot */
        .calendar-day.today::after {
            content: '';
            position: absolute;
            bottom: 6px;
            width: 4px;
            height: 4px;
            background: var(--bg-dark);
            border-radius: 50%;
        }

        /* Results Panel */
        .results-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .today-card {
            background: linear-gradient(135deg, rgba(57, 255, 20, 0.15) 0%, rgba(0, 255, 157, 0.1) 100%);
            border: 1px solid var(--accent-primary);
            border-radius: 16px;
            padding: 24px;
            text-align: center;
        }

        .today-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--accent-primary);
            margin-bottom: 12px;
            font-weight: 600;
        }

        .today-date {
            font-size: 2rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .today-weekday {
            font-size: 1.1rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Selection Card */
        .selection-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 24px;
            transition: all 0.3s ease;
        }

        .selection-card.has-selection {
            border-color: var(--accent-primary);
        }

        .selection-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .selection-icon {
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(57, 255, 20, 0.1);
            border-radius: 12px;
            color: var(--accent-primary);
        }

        .selection-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .selection-subtitle {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .no-selection {
            text-align: center;
            color: var(--text-secondary);
            padding: 30px 0;
        }

        .no-selection svg {
            width: 48px;
            height: 48px;
            margin-bottom: 16px;
            opacity: 0.4;
        }

        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .result-box {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.2s ease;
        }

        .result-box:hover {
            border-color: var(--text-secondary);
        }

        .result-number {
            font-size: 2.5rem;
            font-weight: 800;
            background: var(--gradient-hero);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
            margin-bottom: 8px;
        }

        .result-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-weight: 600;
        }

        .result-box.natural .result-number {
            background: linear-gradient(to right, #fff, #a1a1a1);
            background-clip: text;
            -webkit-background-clip: text;
        }

        /* Selected date display */
        .selected-date-display {
            text-align: center;
            margin-bottom: 20px;
            padding: 16px;
            background: rgba(57, 255, 20, 0.05);
            border-radius: 12px;
        }

        .selected-date-value {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--accent-primary);
        }

        /* Copy buttons */
        .copy-actions {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }

        .btn-copy {
            flex: 1;
            padding: 12px 16px;
            background: transparent;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-secondary);
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-copy:hover {
            border-color: var(--accent-primary);
            color: var(--accent-primary);
            background: rgba(57, 255, 20, 0.1);
        }

        .btn-copy.copied {
            border-color: var(--accent-primary);
            color: var(--accent-primary);
            background: rgba(57, 255, 20, 0.15);
        }

        .btn-copy svg {
            width: 16px;
            height: 16px;
        }

        /* Clear button */
        .btn-clear {
            width: 100%;
            margin-top: 12px;
            padding: 12px;
            background: transparent;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
        }

        .btn-clear:hover {
            border-color: #ff4444;
            color: #ff4444;
            background: rgba(255, 68, 68, 0.1);
        }

        /* Responsive */
        @media (max-width: 900px) {
            .calendar-layout {
                grid-template-columns: 1fr;
            }

            .results-panel {
                order: -1;
            }

            .today-card {
                padding: 20px;
            }

            .today-date {
                font-size: 1.6rem;
            }
        }

        @media (max-width: 500px) {
            .calendar-container {
                padding: 16px;
            }

            .calendar-day {
                font-size: 0.85rem;
            }

            .weekday {
                font-size: 0.65rem;
                padding: 8px 0;
            }

            .result-number {
                font-size: 2rem;
            }

            .results-grid {
                grid-template-columns: 1fr 1fr;
                gap: 8px;
            }

            .result-box {
                padding: 16px;
            }
        }
    </style>
</head>

<body>
    <script src="navbar.js"></script>

    <main class="container">
        <div class="calendar-layout">
            <!-- Calendar -->
            <div class="calendar-container">
                <div class="calendar-header">
                    <h2 class="calendar-title" id="calendarTitle">January 2025</h2>
                    <div class="calendar-nav">
                        <button class="calendar-nav-btn" id="prevMonth" title="Previous month">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="calendar-nav-btn" id="todayBtn" title="Go to today">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                        </button>
                        <button class="calendar-nav-btn" id="nextMonth" title="Next month">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="calendar-weekdays">
                    <div class="weekday">Mon</div>
                    <div class="weekday">Tue</div>
                    <div class="weekday">Wed</div>
                    <div class="weekday">Thu</div>
                    <div class="weekday">Fri</div>
                    <div class="weekday weekend">Sat</div>
                    <div class="weekday weekend">Sun</div>
                </div>

                <div class="calendar-days" id="calendarDays">
                    <!-- Days will be generated by JS -->
                </div>
            </div>

            <!-- Results Panel -->
            <div class="results-panel">
                <!-- Today Card -->
                <div class="today-card">
                    <div class="today-label">Today is</div>
                    <div class="today-date" id="todayDate">November 25</div>
                    <div class="today-weekday" id="todayWeekday">Tuesday</div>
                </div>

                <!-- Selection Card -->
                <div class="selection-card" id="selectionCard">
                    <div class="selection-header">
                        <div class="selection-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                        </div>
                        <div>
                            <div class="selection-title">Day Calculator</div>
                            <div class="selection-subtitle">Select any date</div>
                        </div>
                    </div>

                    <div id="resultsContent">
                        <div class="no-selection">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M12 6v6l4 2"></path>
                            </svg>
                            <p>Click on any date to calculate days</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 AVI.</p>
        </div>
    </footer>

    <script>
        // Calendar state
        let currentDate = new Date();
        let selectedDate = null;
        const today = new Date();
        today.setHours(0, 0, 0, 0);

        // Month names in English
        const monthNames = [
            'January', 'February', 'March', 'April', 'May', 'June',
            'July', 'August', 'September', 'October', 'November', 'December'
        ];

        const weekdayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

        // Initialize
        function init() {
            updateTodayDisplay();
            renderCalendar();
            setupEventListeners();
        }

        // Update today display
        function updateTodayDisplay() {
            const day = today.getDate();
            const month = monthNames[today.getMonth()];
            const weekday = weekdayNames[today.getDay()];

            document.getElementById('todayDate').textContent = `${month} ${day}`;
            document.getElementById('todayWeekday').textContent = weekday;
        }

        // Render calendar
        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();

            // Update title
            document.getElementById('calendarTitle').textContent = `${monthNames[month]} ${year}`;

            // Get first day of month and total days
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const totalDays = lastDay.getDate();

            // Get starting weekday (0 = Sunday, we need Monday = 0)
            let startWeekday = firstDay.getDay() - 1;
            if (startWeekday < 0) startWeekday = 6;

            // Build calendar HTML
            const container = document.getElementById('calendarDays');
            let html = '';

            // Previous month days
            const prevMonthDays = new Date(year, month, 0).getDate();
            for (let i = startWeekday - 1; i >= 0; i--) {
                const day = prevMonthDays - i;
                html += `<div class="calendar-day other-month">${day}</div>`;
            }

            // Current month days
            for (let day = 1; day <= totalDays; day++) {
                const date = new Date(year, month, day);
                date.setHours(0, 0, 0, 0);

                const isToday = date.getTime() === today.getTime();
                const isPast = date < today;
                const isSelected = selectedDate && date.getTime() === selectedDate.getTime();
                const dayOfWeek = date.getDay();
                const isWeekend = dayOfWeek === 0 || dayOfWeek === 6;

                let classes = 'calendar-day';
                if (isToday) classes += ' today';
                if (isPast && !isToday) classes += ' past';
                if (isSelected) classes += ' selected';
                if (isWeekend) classes += ' weekend';

                html += `<div class="${classes}" data-date="${year}-${month + 1}-${day}">${day}</div>`;
            }

            // Next month days
            const remainingSlots = 42 - (startWeekday + totalDays);
            for (let day = 1; day <= remainingSlots && (startWeekday + totalDays + day) <= 42; day++) {
                if (startWeekday + totalDays + day - 1 < 35 && remainingSlots > 7) continue;
                html += `<div class="calendar-day other-month">${day}</div>`;
            }

            container.innerHTML = html;

            // Add click listeners (including past dates)
            container.querySelectorAll('.calendar-day:not(.other-month)').forEach(dayEl => {
                dayEl.addEventListener('click', () => selectDate(dayEl));
            });
        }

        // Select date
        function selectDate(dayEl) {
            const dateStr = dayEl.dataset.date;
            if (!dateStr) return;

            const [year, month, day] = dateStr.split('-').map(Number);
            selectedDate = new Date(year, month - 1, day);
            selectedDate.setHours(0, 0, 0, 0);

            renderCalendar();
            updateResults();
        }

        // Calculate business days (works for past and future)
        function calculateBusinessDays(startDate, endDate) {
            let count = 0;
            const start = new Date(Math.min(startDate, endDate));
            const end = new Date(Math.max(startDate, endDate));
            const current = new Date(start);
            current.setDate(current.getDate() + 1); // Start from next day

            while (current <= end) {
                const dayOfWeek = current.getDay();
                if (dayOfWeek !== 0 && dayOfWeek !== 6) {
                    count++;
                }
                current.setDate(current.getDate() + 1);
            }

            // Return negative if endDate is before startDate
            return startDate > endDate ? -count : count;
        }

        // Calculate natural days (works for past and future)
        function calculateNaturalDays(startDate, endDate) {
            const diffTime = endDate - startDate;
            return Math.round(diffTime / (1000 * 60 * 60 * 24));
        }

        // Update results
        function updateResults() {
            const container = document.getElementById('resultsContent');
            const card = document.getElementById('selectionCard');

            if (!selectedDate) {
                card.classList.remove('has-selection');
                container.innerHTML = `
                    <div class="no-selection">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M12 6v6l4 2"></path>
                        </svg>
                        <p>Click on any date to calculate days</p>
                    </div>
                `;
                return;
            }

            card.classList.add('has-selection');

            const naturalDays = calculateNaturalDays(today, selectedDate);
            const businessDays = calculateBusinessDays(today, selectedDate);
            const isPast = naturalDays < 0;

            const day = selectedDate.getDate();
            const month = monthNames[selectedDate.getMonth()];
            const year = selectedDate.getFullYear();
            const weekday = weekdayNames[selectedDate.getDay()];

            const formattedDate = `${year}-${String(selectedDate.getMonth() + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            const dateString = formattedDate;
            const dateWithDetails = `${formattedDate} (${naturalDays}c, ${businessDays}w)`;

            const timeLabel = isPast ? 'Time Elapsed' : 'Time Remaining';
            const absNatural = Math.abs(naturalDays);
            const absBusiness = Math.abs(businessDays);

            container.innerHTML = `
                <div class="selected-date-display">
                    <div class="selected-date-value">${dateString}</div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 4px;">${timeLabel}</div>
                </div>
                <div class="results-grid">
                    <div class="result-box">
                        <div class="result-number">${isPast ? '-' : ''}${absBusiness}</div>
                        <div class="result-label">Business Days</div>
                    </div>
                    <div class="result-box natural">
                        <div class="result-number">${isPast ? '-' : ''}${absNatural}</div>
                        <div class="result-label">Calendar Days</div>
                    </div>
                </div>
                <div class="copy-actions">
                    <button class="btn-copy" id="copyDate" title="Copy date only">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        <span>Copy Date</span>
                    </button>
                    <button class="btn-copy" id="copyWithDetails" title="Copy date with days info">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        <span>Copy with Details</span>
                    </button>
                </div>
                <button class="btn-clear" id="clearSelection">Clear Selection</button>
            `;

            // Copy date only
            document.getElementById('copyDate').addEventListener('click', (e) => {
                copyToClipboard(dateString, e.currentTarget);
            });

            // Copy date with details
            document.getElementById('copyWithDetails').addEventListener('click', (e) => {
                copyToClipboard(dateWithDetails, e.currentTarget);
            });

            document.getElementById('clearSelection').addEventListener('click', () => {
                selectedDate = null;
                renderCalendar();
                updateResults();
            });
        }

        // Copy to clipboard function
        function copyToClipboard(text, button) {
            navigator.clipboard.writeText(text).then(() => {
                const originalHTML = button.innerHTML;
                button.classList.add('copied');
                button.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                    <span>Copied!</span>
                `;
                setTimeout(() => {
                    button.classList.remove('copied');
                    button.innerHTML = originalHTML;
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
            });
        }

        // Event listeners
        function setupEventListeners() {
            document.getElementById('prevMonth').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                renderCalendar();
            });

            document.getElementById('nextMonth').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                renderCalendar();
            });

            document.getElementById('todayBtn').addEventListener('click', () => {
                currentDate = new Date();
                selectedDate = null;
                renderCalendar();
                updateResults();
            });
        }

        // Start
        init();
    </script>
</body>

</html>
